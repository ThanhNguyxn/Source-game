const c=document.getElementById('gameCanvas'),ctx=c.getContext('2d');c.width=800;c.height=400;let gameRunning=false,score=0,speed=5,player={x:100,y:300,w:40,h:60,vy:0,jumping:false,sliding:false},obstacles=[],ground=350;function addObstacle(){const type=Math.random()<0.5?'low':'high';obstacles.push({x:c.width,y:type==='low'?ground-40:ground-100,w:40,h:type==='low'?40:20,type:type})}function draw(){const gradient=ctx.createLinearGradient(0,0,0,c.height);gradient.addColorStop(0,'#87CEEB');gradient.addColorStop(1,'#E0F6FF');ctx.fillStyle=gradient;ctx.fillRect(0,0,c.width,c.height);ctx.fillStyle='#8B4513';ctx.fillRect(0,ground,c.width,c.height-ground);ctx.fillStyle='#FF6347';const h=player.sliding?30:player.h;ctx.fillRect(player.x,player.y+(player.h-h),player.w,h);obstacles.forEach(o=>{ctx.fillStyle=o.type==='low'?'#2ecc71':'#e74c3c';ctx.fillRect(o.x,o.y,o.w,o.h)})}function update(){if(!gameRunning)return;player.vy+=0.8;player.y+=player.vy;if(player.y>=ground-player.h){player.y=ground-player.h;player.vy=0;player.jumping=false}obstacles.forEach((o,i)=>{o.x-=speed;if(o.x<-o.w){obstacles.splice(i,1);score+=10;document.getElementById('score').textContent=score;if(score%100===0){speed+=0.5;document.getElementById('speed').textContent=`${(speed/5).toFixed(1)}x`}}const ph=player.sliding?30:player.h;if(o.x<player.x+player.w&&o.x+o.w>player.x&&o.y<player.y+ph&&o.y+o.h>player.y){gameRunning=false;document.getElementById('finalScore').textContent=score;document.getElementById('gameOver').classList.remove('hidden')}});if(Math.random()<0.01)addObstacle();draw()}const keys={};window.addEventListener('keydown',e=>{keys[e.key]=true;if((e.key===' '||e.key==='ArrowUp')&&!player.jumping){e.preventDefault();player.vy=-15;player.jumping=true}if(e.key==='ArrowDown'){e.preventDefault();player.sliding=true}});window.addEventListener('keyup',e=>{keys[e.key]=false;if(e.key==='ArrowDown')player.sliding=false});document.getElementById('startBtn').addEventListener('click',()=>{gameRunning=true;score=0;speed=5;obstacles=[];player.y=ground-player.h;player.vy=0;document.getElementById('instructions').classList.add('hidden');document.getElementById('score').textContent=0;document.getElementById('speed').textContent='1x';setInterval(update,20)});document.getElementById('restartBtn').addEventListener('click',()=>{gameRunning=true;score=0;speed=5;obstacles=[];player.y=ground-player.h;player.vy=0;player.jumping=false;player.sliding=false;document.getElementById('gameOver').classList.add('hidden');document.getElementById('score').textContent=0;document.getElementById('speed').textContent='1x'});

